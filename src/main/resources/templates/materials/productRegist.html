<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org"
      xmlns:sec="http://www.thymeleaf.org/thymeleaf-extras-springsecurity5">
<head>
    <meta charset="UTF-8">
    <title>Title</title>
    <link th:href="@{/css/bootstrap.min.css}" rel="stylesheet">
    <link th:href="@{/font-awesome/css/font-awesome.css}" rel="stylesheet">

    <link th:href="@{/css/plugins/dataTables/datatables.min.css}" rel="stylesheet">

    <link th:href="@{/css/animate.css}" rel="stylesheet">
    <link th:href="@{/css/style.css}" rel="stylesheet">

    <style>
        .bg{ background-color: white;
            height: 300px;
        }
    </style>
</head>
<body>
<th:block th:include="/common/header.html"></th:block>

<div class="row wrapper border-bottom white-bg page-heading">
    <div class="col-lg-10">
        <h2>자재관리</h2>
        <ol class="breadcrumb">
            <li class="breadcrumb-item">
                <a th:href="@{/}">메인페이지</a>
            </li>
            <li class="breadcrumb-item">
                <a th:href="@{/materials/productList}">자재관리</a>
            </li>
            <li class="breadcrumb-item">
                <a th:href="@{/materials/productList}">자재목록</a>
            </li>
            <li class="breadcrumb-item active">
                <a th:href="@{/materials/productList}"><strong>자재 생성</strong></a>
            </li>
        </ol>
    </div>
    <div class="col-lg-2">
    </div>
</div>

<!-- 시작 -->
<div class="pace  pace-inactive"><div class="pace-progress" data-progress-text="100%" data-progress="99" style="transform: translate3d(100%, 0px, 0px);">
    <div class="pace-progress-inner"></div>
</div>
    <div class="pace-activity"></div>
</div>

<div class="wrapper wrapper-content animated fadeInRight">
    <div class="row">
        <div class="col-lg-12">
            <div class="ibox ">
                <div class="ibox-title">
                    <h5>자재 상세조회</h5>
                    <div class="ibox-tools">
                        <a class="collapse-link">
                            <i class="fa fa-chevron-up"></i>
                        </a>
                    </div>
                </div>

                <div class="ibox-content" style="height: 700px;">
                    <div style="float: left; width: 40%;">자재 정보
                        <button class="btn btn-primary " type="button" style="float: right;" data-toggle="modal" data-target="#myModal10" id="myModal">
                            <i class="fa fa-check"></i>&nbsp;자재 검색
                        </button><hr></hr>
                        <form method="post">
                            <div class="form-group  row">
                                <label class="col-sm-2 col-form-label">자재 번호</label>
                                <div class="col-sm-10">
                                    <input type="number" class="form-control" name="itemInfoNo" readonly>
                                </div>
                            </div>
                            <div class="form-group  row">
                                <label class="col-sm-2 col-form-label">자재 품번</label>
                                <div class="col-sm-10">
                                    <input type="text" class="form-control" name="itemSerialNo" readonly>
                                </div>
                            </div>
                            <div class="form-group  row">
                                <label class="col-sm-2 col-form-label">자재 품명</label>
                                <div class="col-sm-10">
                                    <input type="text" class="form-control" name="itemInfoName" readonly>
                                </div>
                            </div>
                            <div class="form-group  row">
                                <label class="col-sm-2 col-form-label">카테고리</label>
                                <div class="col-sm-10">
                                    <input type="text" class="form-control" name="materialCategoryName" readonly>
                                </div>
                            </div>
                            <div class="form-group  row">
                                <label class="col-sm-2 col-form-label">가공 유무</label>
                                <div class="col-sm-10">
                                    <input type="text" class="form-control" name="subdivisionYN" readonly>
                                </div>
                            </div>
                            <div class="form-group  row">
                                <label class="col-sm-2 col-form-label">판매 가격</label>
                                <div class="col-sm-10">
                                    <input type="number" class="form-control" name="itemPrice" readonly>
                                </div>
                            </div>
                            <div class="form-group  row">
                                <label class="col-sm-2 col-form-label">소분 단위</label>
                                <div class="col-sm-10">
                                    <input type="number" class="form-control" name="subdivisionUnit" readonly>
                                </div>
                            </div>
                        </form>
                    </div>
                    <div style="float: right; width: 40%;">거래처 정보<button class="btn btn-primary " type="button" style="float: right;" data-toggle="modal" data-target="#myModal4">
                        <i class="fa fa-check"></i>&nbsp;거래처 검색
                    </button><hr></hr>
                        <div class="form-group  row">
                            <label class="col-sm-2 col-form-label">상품 번호</label>
                            <div class="col-sm-10">
                                <input type="number" class="form-control" name="itemInfoNo" readonly>
                            </div>
                        </div>
                        <div class="form-group  row">
                            <label class="col-sm-2 col-form-label">상품명</label>
                            <div class="col-sm-10">
                                <input type="text" class="form-control" name="itemSerialNo" readonly>
                            </div>
                        </div>
                        <div class="form-group  row">
                            <label class="col-sm-2 col-form-label">공급가</label>
                            <div class="col-sm-10">
                                <input type="text" class="form-control" name="itemInfoName" readonly>
                            </div>
                        </div>
                        <div class="form-group  row">
                            <label class="col-sm-2 col-form-label">거래처 명</label>
                            <div class="col-sm-10">
                                <input type="number" class="form-control" name="itemPrice" readonly>
                            </div>
                        </div>
                        <div class="form-group  row">
                            <label class="col-sm-2 col-form-label">이메일</label>
                            <div class="col-sm-10">
                                <input type="number" class="form-control" name="subdivisionUnit" readonly>
                            </div>
                        </div>
                        <div class="form-group  row">
                            <label class="col-sm-2 col-form-label">대표 핸드폰</label>
                            <div class="col-sm-10">
                                <input type="number" class="form-control" name="subdivisionUnit" readonly>
                            </div>
                        </div>
                        <div class="form-group  row">
                            <label class="col-sm-2 col-form-label">사업자 번호</label>
                            <div class="col-sm-10">
                                <input type="number" class="form-control" name="subdivisionUnit" readonly>
                            </div>
                        </div>
                        <div style="margin-top: 100px;">
                            <button class="btn btn-primary " type="button" style="float: right; margin-left: 20px;" onclick="location.href='/materials/regist'">
                                <i class="fa fa-check"></i>&nbsp;취소
                            </button>
                            <button class="btn btn-primary " type="button" style="float: right;" onclick="location.href='/materials/regist'">
                                <i class="fa fa-check"></i>&nbsp;저장
                            </button>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>
</div>

<!-- 거래처 검색 모달 -->
<div class="modal inmodal" id="myModal4" tabindex="-1" role="dialog"  aria-hidden="true">
    <div class="modal-dialog">
        <div class="modal-content animated fadeIn">
            <div class="modal-header">
                <button type="button" class="close" data-dismiss="modal"><span aria-hidden="true">&times;</span><span class="sr-only">Close</span></button>
                <i class="fa fa-clock-o modal-icon"></i>
                <h4 class="modal-title">Modal title</h4>
                <small>Lorem Ipsum is simply dummy text of the printing and typesetting industry.</small>
            </div>
            <div class="modal-body">
                <p><strong>Lorem Ipsum is simply dummy</strong> text of the printing and typesetting industry. Lorem Ipsum has been the industry's standard dummy text ever since the 1500s, when an unknown
                    printer took a galley of type and scrambled it to make a type specimen book. It has survived not only five centuries, but also the leap into electronic typesetting,
                    remaining essentially unchanged.</p>
            </div>
            <div class="modal-footer">
                <button type="button" class="btn btn-white" data-dismiss="modal">Close</button>
                <button type="button" class="btn btn-primary">Save changes</button>
            </div>
        </div>
    </div>
</div>

<!-- 자재 검색 모달 -->
<div class="modal inmodal" id="myModal10" tabindex="-1" role="dialog"  aria-hidden="true">
    <div class="modal-dialog">
        <div class="modal-content animated fadeIn">
            <div class="modal-header">
                <button type="button" class="close" data-dismiss="modal"><span aria-hidden="true">&times;</span><span class="sr-only">Close</span></button>
                <h4 class="modal-title">Modal title</h4>
                <small>Lorem Ipsum is simply dummy text of the printing and typesetting industry.</small>
            </div>
            <div class="modal-body" id="productList">
<!--                <table class="table table-striped table-bordered table-hover dataTables-example" id="listArea">-->
<!--                    <thead>-->
<!--                        <tr>-->
<!--                            <th>자재 번호</th>-->
<!--                            <th>자재 품번</th>-->
<!--                            <th>자재 품명</th>-->
<!--                            <th>카테고리</th>-->
<!--                            <th>가공 유무</th>-->
<!--                            <th>판매가격</th>-->
<!--                        </tr>-->
<!--                    </thead>-->
<!--                    <tbody>-->
<!--                        <tr th:each="materials : ${materialsList}">-->
<!--                            <td th:text="${materials.itemInfoNo}"></td>-->
<!--                            <td th:text="${materials.itemSerialNo}"></td>-->
<!--                            <td th:text="${materials.itemInfoName}"></td>-->
<!--                            <td th:text="${materials.materialsCategory.materialCategoryName}"></td>-->
<!--                            <td th:text="${materials.subdivisionYN}"></td>-->
<!--                            <td th:text="${materials.itemPrice}"></td>-->
<!--                        </tr>-->
<!--                    </tbody>-->
<!--                </table>-->
           </div>
            <div class="modal-footer">
                <button type="button" class="btn btn-white" data-dismiss="modal">Close</button>
                <button type="button" class="btn btn-primary">Save changes</button>
            </div>
        </div>
    </div>
</div>


<th:blockpi th:replace="/common/footer.html"></th:blockpi>

<script>
    $("#myModal").click(function (){

        $.ajax({
            url : "/materials/registList",
            type : "get",
            dataType: "json",
            success : function (data, textStatus, xhr) {

                console.log("에이젝스 실행 성공");
                console.log(data);
                let test = JSON.parse(data.materialsList);

                console.log(test);

                console.log("에이젝스 실행 성공");
                $("#productList").empty();

                    let body = '';
                    console.log(data);
                    body += '<table class="table table-striped table-bordered table-hover dataTables-example" id="listArea">'
                    body += '<tr>'
                    body += '<th>자재 번호</th>'
                    body += '<th>자재 품번</th>'
                    body += '<th>자재 품명</th>'
                    body += '<th>카테고리</th>'
                    body += '<th>가공 유무</th>'
                    body += '<th>판매 가격</th>'
                    body += '</tr>'
                    $.each(test , function(i){

                        body += '<tr>'
                        body += '<td>' + test[i].itemInfoNo + '</td>'
                        body += '<td>' + test[i].itemSerialNo + '</td>'
                        body += '<td>' + test[i].itemInfoName + '</td>'
                        body += '<td>' + test[i].materialsCategory.materialCategoryName + '</td>'
                        body += '<td>' + test[i].subdivisionYN + '</td>'
                        body += '<td>' + test[i].itemPrice + '</td>'
                        body += '</tr>'
                    });

                        body += '</table>'

                    $("#productList").append(body);

            },
            error: function (data) {
                console.log("error 잘못");
            }
        });
    });

    // function pageLink(curPage, totalPages, funName) {
    //
    //     var pageUrl = "";
    //     var pageLimit = 5;
    //     var startPage = parseInt((curPage - 1) / pageLimit) * pageLimit + 1;
    //     var endPage = startPage + pageLimit - 1;
    //
    //     if (totalPages < endPage) {
    //         endPage = totalPages;
    //     }
    //
    //     var nextPage = endPage + 1;
    //     //console.log(curPage,"curPage,",startPage,"startPage,",endPage,"endPage,",nextPage,"nextPage")
    //
    //     //맨 첫 페이지
    //     if (curPage > 1 && pageLimit < curPage) {
    //         pageUrl += "<a class='page first' href='javascript:" + funName + "(1);'>" +
    //             "<i class='fas fa-angle-double-left'>" +
    //             "</a>";
    //     }
    //
    //     //이전 페이지
    //     if (curPage > pageLimit) {
    //         pageUrl += " <a class='page prev' href='javascript:" + funName + "(" + (startPage == 1 ? 1 : startPage - 1) + ");'>" +
    //             "<i class='fas fa-angle-left'>" +
    //             "</a>";
    //     }
    //
    //     //~pageLimit 맞게 페이지 수 보여줌
    //     for (var i = startPage; i <= endPage; i++) {
    //         //현재페이지면 진하게 표시
    //         if (i == curPage) {
    //             pageUrl += " <a href='#'>" +
    //                 "<strong>" + i + "</strong>" +
    //                 "</a>"
    //         } else {
    //             pageUrl += " <a href='javascript:" + funName + "(" + i + ");'> " + i + " </a>";
    //         }
    //     }
    //
    //     //다음 페이지
    //     if (nextPage <= totalPages) {
    //         pageUrl += "<a class='page next' href='javascript:" + funName + "(" + (nextPage < totalPages ? nextPage : totalPages) + ");'>" +
    //             "<i class='fas fa-angle-right'>" +
    //             "</a>";
    //     }
    //
    //     //맨 마지막 페이지
    //     if (curPage < totalPages && nextPage < totalPages) {
    //         pageUrl += "<a class='page last' href='javascript:" + funName + "(" + totalPages + ");'>" +
    //             "<i class='fas fa-angle-double-right'>" +
    //             "</a>";
    //     }
    //     //console.log(pageUrl); return pageUrl;
    // }

</script>
</body>
</html>